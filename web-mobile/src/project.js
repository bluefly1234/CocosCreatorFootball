require=function t(n,e,o){function c(i,s){if(!e[i]){if(!n[i]){var d="function"==typeof require&&require;if(!s&&d)return d(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var r=e[i]={exports:{}};n[i][0].call(r.exports,function(t){var e=n[i][1][t];return c(e||t)},r,r.exports,t,n,e,o)}return e[i].exports}for(var a="function"==typeof require&&require,i=0;i<o.length;i++)c(o[i]);return c}({End:[function(t,n,e){"use strict";cc._RF.push(n,"5706f7D98RHd7s9aNyIjUOT","End"),cc.Class({extends:cc.Component,properties:{endtxt:{default:null,type:cc.Node}},onLoad:function(){1==window.win?this.endtxt.getComponent(cc.Label).string="恭喜你，赢得了这场比赛，大吉大利！":2==window.win?this.endtxt.getComponent(cc.Label).string="问题不大，再来一把，找回场子！":this.endtxt.getComponent(cc.Label).string="就差一个球就能赢啦，真可惜！"},start:function(){}}),cc._RF.pop()},{}],Mball:[function(t,n,e){"use strict";cc._RF.push(n,"a4fc0xwUzNAmrvmb0LEieOU","Mball"),cc.Class({extends:cc.Component,properties:{gameCtl:t("Mcanvas"),y1:0,y2:0},again:function(t){this.speedy=250,this.speedx=300;var n=n=cc.randomMinus1To1()>0?1:-1,e=e=cc.randomMinus1To1()>0?1:-1;this.scheduleOnce(function(){this.node.position=cc.v2(0,0),this.getComponent(cc.RigidBody).linearVelocity=cc.v2(this.speedx*n,this.speedy*e),cc.director.getPhysicsManager().enabled=!0,1==window.Sel&&this.gameCtl.robot()},2)},onBeginContact:function(t,n,e){var o=t.getWorldManifold().points,c=n.body.getLinearVelocityFromWorldPoint(o[i]).y;switch(e.tag){case 1:c>0?t.disabled=!0:this.gameCtl.onBallContactPaddle(n.node,e.node);break;case 2:c<0?t.disabled=!0:this.gameCtl.onBallContactPaddle(n.node,e.node);break;case 3:this.gameCtl.onBallContactWall(n.node,e.node);break;case 11:case 22:this.gameCtl.onBallContactGround(n.node,e.node)}},onEndContact:function(t,n,e){1!=e.tag&&2!=e.tag||this.gameCtl.onBallEndMan(n.node,e.node)},init:function(){this.speedy=250,this.speedx=300;var t=t=cc.randomMinus1To1()>0?1:-1,n=n=cc.randomMinus1To1()>0?1:-1;this.getComponent(cc.RigidBody).linearVelocity=cc.v2(this.speedy*t,this.speedx*n)},onLoad:function(){cc.director.getPhysicsManager().enabled=!0},start:function(){},thouch:function(){var t=this,n=0;this.node.parent.on("touchstart",function(e){n=t.node.parent.convertToNodeSpaceAR(e.getLocation()).x}),this.node.parent.on("touchmove",function(e){t.node.getPosition().y;for(var o=t.node.parent.convertToNodeSpaceAR(e.getLocation()).x,c=o-n,a=[],i=1;i<=10;i++)a.push(cc.find("Canvas/PhysicsLayer/teamA/playA"+i).x);var s=a;(a=a.map(function(t){return t+.4*c}))[0]<120&&a[0]>-120&&(s[0]=cc.find("Canvas/PhysicsLayer/teamA/playA1").x=a[0]),a[1]<330&&a[2]>-330&&(s[1]=cc.find("Canvas/PhysicsLayer/teamA/playA2").x=a[1],s[2]=cc.find("Canvas/PhysicsLayer/teamA/playA3").x=a[2]),a[3]<330&&a[6]>-330&&(s[3]=cc.find("Canvas/PhysicsLayer/teamA/playA4").x=a[3],s[4]=cc.find("Canvas/PhysicsLayer/teamA/playA5").x=a[4],s[5]=cc.find("Canvas/PhysicsLayer/teamA/playA6").x=a[5],s[6]=cc.find("Canvas/PhysicsLayer/teamA/playA7").x=a[6]),a[7]<330&&a[9]>-330&&(s[7]=cc.find("Canvas/PhysicsLayer/teamA/playA8").x=a[7],s[8]=cc.find("Canvas/PhysicsLayer/teamA/playA9").x=a[8],s[9]=cc.find("Canvas/PhysicsLayer/teamA/playA10").x=a[9]),n=o})},update:function(t){}}),cc._RF.pop()},{Mcanvas:"Mcanvas"}],Mcanvas:[function(t,n,e){"use strict";cc._RF.push(n,"a970fPOx5JDlamA9G/ilfj2","Mcanvas");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};window.win=0,cc.Class({extends:cc.Component,properties:{score_d1:0,score_d2:0,bsc:{default:null,type:cc.Node},rsc:{default:null,type:cc.Node},stoptime:{default:null,type:cc.Node},ball:{default:null,type:cc.Node},teamA:{default:null,type:cc.Node},teamB:{default:null,type:cc.Node}},init:function(){var t=this;cc.director.setDisplayStats(!1),this.ball.getComponent("Mball").init();var n=1,e=60,o=setInterval(function(){if(0==e){if(--n<0)return cc.director.getPhysicsManager().enabled=!1,t.unscheduleAllCallbacks(),clearInterval(o),setTimeout(function(){cc.director.loadScene("end")},500),!1;e=60}--e<10&&(e="0"+e),t.stoptime.getComponent(cc.Label).string=n+":"+e},1e3);window.ws=new WebSocket("ws://192.168.0.148:3000"),ws.onopen=function(t){console.log("Send Text WS was opened.")},ws.onmessage=function(t){var n=t.data;console.log(n)},1==window.Sel&&this.robot(),this.thouch()},onLoad:function(){var t=this;setTimeout(function(){t.init()},400)},robot:function(){var t=10;this.schedule(function(){for(var n=[],e=0;e<this.teamB.children.length;e++)n.push(this.teamB.children[e].x);this.teamB.children[9].x>100?t=-20*Math.random():this.teamB.children[9].x<-100&&(t=20*Math.random());var o=n=n.map(function(n){return n+t});this.play_move(this.teamB.children,n,o)},.1)},play_move:function(t,n,e){"object"==(void 0===n?"undefined":o(n))&&(n[9]<120&&n[9]>-120&&(e[9]=t[9].x=n[9]),n[8]<330&&n[7]>-330&&(e[8]=t[8].x=n[8],e[7]=t[7].x=n[7]),n[6]<330&&n[3]>-330&&(e[6]=t[6].x=n[6],e[5]=t[5].x=n[5],e[4]=t[4].x=n[4],e[3]=t[3].x=n[3]),n[2]<330&&n[0]>-330&&(e[2]=t[2].x=n[2],e[1]=t[1].x=n[1],e[0]=t[0].x=n[0]))},thouch:function(){var t=this,n=0;if(this.node.on("touchstart",function(e){n=t.node.convertToNodeSpaceAR(e.getLocation()).x}),this.node.on("touchmove",function(e){for(var o=t,c=t.node.convertToNodeSpaceAR(e.getLocation()).x,a=c-n,i=[],s=0;s<t.teamA.children.length;s++)i.push(t.teamA.children[s].x);var d=i;i=i.map(function(t){return t+.5*a}),t.play_move(o.teamA.children,i,d),n=c,1!=window.Sel&&ws.send(d)}),1!=window.Sel){var e=this;ws.onmessage=function(t){var n=t.data;n=n.split(",");for(var o=0;o<n.length;o++)e.teamB.children[o].x=n[o]}}},onBallContactGround:function(t,n){cc.director.getPhysicsManager().enabled=!1,"doorA"==n._name?this.score_d1+=1:"doorB"==n._name&&(this.score_d2+=1),this.ball.getComponent("Mball").again(),this.unscheduleAllCallbacks()},onBallContactPaddle:function(t,n){n.height=40},onBallContactWall:function(t,n){},onBallEndMan:function(t,n){n.height=30},update:function(t){this.bsc.getComponent(cc.Label).string=this.score_d1,this.rsc.getComponent(cc.Label).string=this.score_d2,this.score_d1>this.score_d2?window.win=1:window.win=2}}),cc._RF.pop()},{}],Sel:[function(t,n,e){"use strict";cc._RF.push(n,"dad0aFbTe9EqLy63a7qyfVV","Sel"),cc.Class({extends:cc.Component,properties:{SelOne:{default:null,type:cc.Node},SelFriend:{default:null,type:cc.Node},SelRandom:{default:null,type:cc.Node},fx:{default:null,type:cc.Node}},onLoad:function(){var t=this;this.SelOne.on("touchstart",function(t){cc.director.loadScene("wait"),window.Sel=1}),this.SelFriend.on("touchstart",function(n){window.Sel=2,t.fx.getComponent(cc.Animation).play(),setTimeout(function(){cc.director.loadScene("wait")},3e3)}),this.SelRandom.on("touchstart",function(t){window.Sel=3,cc.director.loadScene("wait")}),cc.director.preloadScene("wait",function(){})},start:function(){}}),cc._RF.pop()},{}],W_vs:[function(t,n,e){"use strict";cc._RF.push(n,"96dadOkBYdI3ZGcfM+VLH1Y","W_vs"),cc.Class({extends:cc.Component,properties:{bg:{default:null,type:cc.Node}},onAnimCompleted:function(){cc.director.loadScene("main")},onAnimin:function(){cc.log(this.bg.opacity)},start:function(){}}),cc._RF.pop()},{}],Wait:[function(t,n,e){"use strict";cc._RF.push(n,"360a9D0B4FJrpvW2Iw025o8","Wait"),cc.Class({extends:cc.Component,properties:{Wblue:{default:null,type:cc.Node},Wred:{default:null,type:cc.Node},Wvs:{default:null,type:cc.Node}},onLoad:function(){cc.director.preloadScene("main",function(){}),this.scheduleOnce(function(){this.Wblue.getComponent(cc.Animation).playAdditive("W_blue_out"),this.Wred.getComponent(cc.Animation).playAdditive("W_red_out"),this.Wvs.getComponent(cc.Animation).playAdditive("W_vs_out")},2),1==window.Sel&&(cc.find("Canvas/blue/play1").opacity=cc.find("Canvas/red/play2").opacity=0)},start:function(){}}),cc._RF.pop()},{}]},{},["End","Mball","Mcanvas","Sel","W_vs","Wait"]);